<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strichm√§nnchen Kampf Arena - Text-Waffen-System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
</head>
<body>
    <div class="game-container">
        <!-- Hauptmen√º -->
        <div id="main-menu" class="screen active">
            <div class="logo">
                <h1>STRICHM√ÑNNCHEN</h1>
                <h2>KAMPF ARENA</h2>
                <div class="subtitle">ü§ñ Mit KI-Waffen-Generierung</div>
                <div class="online-indicator">
                    <span class="status-dot" id="connection-status"></span>
                    <span id="connection-text">Offline</span>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="btn btn--primary btn--lg" id="create-lobby-btn">
                    <span>üåê</span> LOBBY ERSTELLEN
                </button>
                <button class="btn btn--secondary btn--lg" id="join-lobby-btn">
                    <span>üîó</span> LOBBY BEITRETEN
                </button>
                <button class="btn btn--outline btn--lg" id="local-game-btn">
                    <span>üéÆ</span> LOKALES SPIEL
                </button>
                <button class="btn btn--outline btn--lg" id="help-btn">
                    <span>‚ùì</span> HILFE
                </button>
            </div>
            <div class="game-stats">
                <p>Online Siege: <span id="online-wins">0</span></p>
                <p>Lokale Spiele: <span id="total-games">0</span></p>
            </div>
        </div>

        <!-- Lobby Erstellen -->
        <div id="create-lobby" class="screen">
            <div class="lobby-container">
                <h2>Lobby Erstellen</h2>
                <div class="lobby-code-display">
                    <h3>Dein Lobby-Code:</h3>
                    <div class="code-container">
                        <span id="lobby-code">ABC123</span>
                        <button class="btn btn--outline btn--sm" id="copy-code">Kopieren</button>
                    </div>
                    <p>Teile diesen Code mit deinem Freund!</p>
                </div>
                <div class="waiting-status">
                    <div class="loading-spinner"></div>
                    <p id="waiting-text">Warte auf Mitspieler...</p>
                </div>
                <div class="lobby-actions">
                    <button class="btn btn--secondary" id="cancel-lobby">
                        <span>‚ùå</span> Abbrechen
                    </button>
                </div>
            </div>
        </div>

        <!-- Lobby Beitreten -->
        <div id="join-lobby" class="screen">
            <div class="lobby-container">
                <h2>Lobby Beitreten</h2>
                <div class="join-form">
                    <div class="form-group">
                        <label class="form-label">Lobby-Code eingeben:</label>
                        <input type="text" id="lobby-code-input" class="form-control" placeholder="ABC123" maxlength="6">
                    </div>
                    <div class="connection-status" id="join-status">
                        <span id="join-status-text">Bereit zum Verbinden</span>
                    </div>
                </div>
                <div class="lobby-actions">
                    <button class="btn btn--primary" id="connect-lobby">
                        <span>üîó</span> VERBINDEN
                    </button>
                    <button class="btn btn--secondary" id="back-to-menu">
                        <span>‚¨ÖÔ∏è</span> Zur√ºck
                    </button>
                </div>
            </div>
        </div>

        <!-- Lobby Warteraum -->
        <div id="lobby-room" class="screen">
            <div class="room-container">
                <h2>Lobby: <span id="room-code">ABC123</span></h2>
                <div class="players-grid">
                    <div class="player-card" id="player1-card">
                        <div class="player-avatar">üë§</div>
                        <h3 id="player1-name">Du</h3>
                        <div class="ready-status" id="player1-ready">
                            <span class="status-dot ready"></span>
                            <span>Bereit</span>
                        </div>
                    </div>
                    <div class="player-card" id="player2-card">
                        <div class="player-avatar">ü§ñ</div>
                        <h3 id="player2-name">Warte auf Spieler...</h3>
                        <div class="ready-status" id="player2-ready">
                            <span class="status-dot waiting"></span>
                            <span>Nicht bereit</span>
                        </div>
                    </div>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="system-message">Willkommen in der Lobby!</div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chat-message" class="form-control" placeholder="Nachricht schreiben..." maxlength="100">
                        <button class="btn btn--primary btn--sm" id="send-chat">Senden</button>
                    </div>
                </div>
                <div class="room-actions">
                    <button class="btn btn--primary btn--lg" id="start-game" disabled>
                        <span>üöÄ</span> SPIEL STARTEN
                    </button>
                    <button class="btn btn--secondary" id="leave-lobby">
                        <span>üö™</span> Lobby Verlassen
                    </button>
                </div>
            </div>
        </div>

        <!-- Waffen-Beschreibung -->
        <div id="weapon-description" class="screen">
            <div class="description-header">
                <h2 id="current-player-title">Spieler 1 - Beschreibe deine Waffe!</h2>
                <div class="timer-container">
                    <div class="timer-circle">
                        <span id="timer">30</span>
                    </div>
                </div>
                <div class="sync-status">
                    <span id="sync-indicator">üîÑ</span>
                    <span id="sync-text">Synchronisiert</span>
                </div>
            </div>
            
            <div class="description-area">
                <div class="text-input-container">
                    <textarea id="weapon-text" class="weapon-description-input" placeholder="Beschreibe deine ultimative Waffe...&#10;&#10;Beispiel: 'Ein flammendes Diamantschwert mit Blitzmagie'"></textarea>
                    <div class="character-count">
                        <span id="char-count">0</span>/200 Zeichen
                    </div>
                </div>
                
                <div class="inspiration-section">
                    <h4>üí° Inspiration & Beispiele:</h4>
                    <div class="example-tags" id="example-tags">
                        <span class="tag" data-text="Explosive Plasmaaxt mit Blitzeffekt">‚ö° Explosive Plasmaaxt</span>
                        <span class="tag" data-text="Magischer Diamantbogen der Heilung">üíé Diamantbogen</span>
                        <span class="tag" data-text="Giftiger Stahldolch mit Eisschaden">‚ò†Ô∏è Giftiger Dolch</span>
                        <span class="tag" data-text="Flammendes Kristallschwert">üî• Flammenschwert</span>
                        <span class="tag" data-text="Goldener Zauberstab des Feuers">ü™Ñ Feuerstab</span>
                        <span class="tag" data-text="Eisiger Kriegshammer aus Diamant">‚ùÑÔ∏è Eishammer</span>
                    </div>
                    <button class="btn btn--outline btn--sm" id="random-weapon">üé≤ Zuf√§llige Idee</button>
                </div>
            </div>
            
            <div class="description-controls">
                <button class="btn btn--primary btn--lg" id="generate-weapon">
                    <span>ü§ñ</span> WAFFE GENERIEREN
                </button>
                <button class="btn btn--outline" id="back-from-description">
                    <span>‚¨ÖÔ∏è</span> Zur√ºck
                </button>
            </div>
            
            <div class="opponent-status" id="opponent-status">
                <span>Gegner: </span><span id="opponent-progress">Beschreibt...</span>
            </div>
        </div>

        <!-- KI Analyse -->
        <div id="ai-analysis" class="screen">
            <div class="analysis-container">
                <h2>ü§ñ KI-Waffen-Analyse</h2>
                <div class="weapon-results">
                    <div class="weapon-result" id="player1-weapon">
                        <h3 id="p1-player-name">Spieler 1</h3>
                        <div class="weapon-visual">
                            <div class="weapon-icon" id="p1-weapon-icon">‚öîÔ∏è</div>
                            <div class="weapon-effects" id="p1-weapon-effects"></div>
                        </div>
                        <h4 class="weapon-name" id="p1-weapon-name">Flammendes Diamantschwert</h4>
                        <div class="weapon-description" id="p1-weapon-description">"Ein flammendes Diamantschwert mit Blitzmagie"</div>
                        
                        <div class="weapon-stats">
                            <div class="stat">
                                <span class="stat-label">Typ:</span>
                                <span class="stat-value" id="p1-weapon-type">Schwert</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Material:</span>
                                <span class="stat-value" id="p1-weapon-material">Diamant</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Schaden:</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="p1-damage-bar"></div>
                                    <span class="stat-value" id="p1-damage-value">85</span>
                                </div>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Geschwindigkeit:</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="p1-speed-bar"></div>
                                    <span class="stat-value" id="p1-speed-value">70</span>
                                </div>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Reichweite:</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="p1-range-bar"></div>
                                    <span class="stat-value" id="p1-range-value">45</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="ai-insights">
                            <h5>ü§ñ KI-Erkenntnisse:</h5>
                            <ul id="p1-ai-insights">
                                <li>‚úì Waffentyp: Schwert erkannt</li>
                                <li>‚úì Material: Diamant (+40% Bonus)</li>
                                <li>‚úì Effekt: Feuer (+15 Schaden)</li>
                                <li>‚úì Kreativit√§ts-Bonus: +10%</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="weapon-result" id="player2-weapon">
                        <h3 id="p2-player-name">Spieler 2</h3>
                        <div class="weapon-visual">
                            <div class="weapon-icon" id="p2-weapon-icon">ü™ì</div>
                            <div class="weapon-effects" id="p2-weapon-effects"></div>
                        </div>
                        <h4 class="weapon-name" id="p2-weapon-name">Explosive Plasmaaxt</h4>
                        <div class="weapon-description" id="p2-weapon-description">"Eine explosive Plasmaaxt"</div>
                        
                        <div class="weapon-stats">
                            <div class="stat">
                                <span class="stat-label">Typ:</span>
                                <span class="stat-value" id="p2-weapon-type">Axt</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Material:</span>
                                <span class="stat-value" id="p2-weapon-material">Plasma</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Schaden:</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="p2-damage-bar"></div>
                                    <span class="stat-value" id="p2-damage-value">95</span>
                                </div>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Geschwindigkeit:</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="p2-speed-bar"></div>
                                    <span class="stat-value" id="p2-speed-value">60</span>
                                </div>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Reichweite:</span>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="p2-range-bar"></div>
                                    <span class="stat-value" id="p2-range-value">52</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="ai-insights">
                            <h5>ü§ñ KI-Erkenntnisse:</h5>
                            <ul id="p2-ai-insights">
                                <li>‚úì Waffentyp: Axt erkannt</li>
                                <li>‚úì Material: Plasma (+50% Bonus)</li>
                                <li>‚úì Effekt: Explosiv (+25 Schaden)</li>
                                <li>‚úì L√§ngen-Bonus: +5%</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-actions">
                    <button class="btn btn--primary btn--lg" id="continue-to-battle">
                        <span>‚öîÔ∏è</span> ZUM KAMPF!
                    </button>
                    <button class="btn btn--outline" id="back-from-analysis">
                        <span>‚¨ÖÔ∏è</span> Zur√ºck
                    </button>
                </div>
            </div>
        </div>

        <!-- Kampf -->
        <div id="battle" class="screen">
            <div class="battle-ui">
                <div class="player-hud" id="player1-hud">
                    <h3 id="battle-p1-name">Spieler 1</h3>
                    <div class="health-bar">
                        <div class="health-fill" id="p1-health"></div>
                    </div>
                    <div class="stamina-bar">
                        <div class="stamina-fill" id="p1-stamina"></div>
                    </div>
                    <div class="ping-indicator" id="p1-ping">Ping: 0ms</div>
                </div>
                <div class="battle-timer">
                    <span id="battle-time">120</span>
                </div>
                <div class="player-hud" id="player2-hud">
                    <h3 id="battle-p2-name">Spieler 2</h3>
                    <div class="health-bar">
                        <div class="health-fill" id="p2-health"></div>
                    </div>
                    <div class="stamina-bar">
                        <div class="stamina-fill" id="p2-stamina"></div>
                    </div>
                    <div class="ping-indicator" id="p2-ping">Ping: 0ms</div>
                </div>
            </div>
            <canvas id="game-canvas" width="1200" height="600"></canvas>
            <div class="controls-hint">
                <div class="controls-player">
                    <h4>Steuerung</h4>
                    <p>WASD = Bewegen | Leertaste = Springen | F = Angriff</p>
                </div>
                <div class="sync-status-battle">
                    <span id="battle-sync-indicator">üîÑ</span>
                    <span id="battle-sync-text">Synchronisiert</span>
                </div>
            </div>
        </div>

        <!-- Ergebnis -->
        <div id="game-result" class="screen">
            <div class="result-container">
                <h1 id="winner-text">Spieler 1 Gewinnt!</h1>
                <div class="victory-animation">üèÜ</div>
                <div class="match-stats">
                    <h3>Kampf-Statistiken</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Kampfdauer:</span>
                            <span class="stat-value" id="fight-duration">0:45</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Deine Treffer:</span>
                            <span class="stat-value" id="my-hits">8</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Gegner Treffer:</span>
                            <span class="stat-value" id="opponent-hits">5</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Durchschnittlicher Ping:</span>
                            <span class="stat-value" id="avg-ping">45ms</span>
                        </div>
                    </div>
                    <div class="weapon-showcase">
                        <h4>üèÜ Beste Waffe:</h4>
                        <div class="best-weapon" id="best-weapon">
                            <span class="weapon-emoji">‚öîÔ∏è</span>
                            <span class="weapon-title">Flammendes Diamantschwert</span>
                        </div>
                    </div>
                </div>
                <div class="result-buttons">
                    <button class="btn btn--primary btn--lg" id="rematch-btn">
                        <span>üîÑ</span> Revanche
                    </button>
                    <button class="btn btn--secondary btn--lg" id="new-game-btn">
                        <span>üéÆ</span> Neues Spiel
                    </button>
                    <button class="btn btn--outline btn--lg" id="main-menu-btn">
                        <span>üè†</span> Hauptmen√º
                    </button>
                </div>
            </div>
        </div>

        <!-- Hilfe Modal -->
        <div id="help-modal" class="modal hidden">
            <div class="modal-content">
                <h2>KI-Waffen-System Anleitung</h2>
                <div class="help-content">
                    <h3>ü§ñ Wie funktioniert das KI-System?</h3>
                    <ol>
                        <li><strong>Beschreibe deine Waffe:</strong> Schreibe eine kreative Beschreibung (50-200 Zeichen)</li>
                        <li><strong>KI-Analyse:</strong> Das System erkennt automatisch Waffentyp, Material und Effekte</li>
                        <li><strong>Stat-Generierung:</strong> Basierend auf deiner Beschreibung werden Schaden, Geschwindigkeit und Reichweite berechnet</li>
                        <li><strong>Kampf:</strong> Nutze deine generierte Waffe im Online-PvP</li>
                    </ol>
                    
                    <h3>üí° Tipps f√ºr bessere Waffen:</h3>
                    <div class="tips-grid">
                        <div class="tip">
                            <strong>Waffentypen:</strong><br>
                            Schwert, Axt, Speer, Pistole, Gewehr, Bogen, Hammer, Dolch, Laser, Zauberstab
                        </div>
                        <div class="tip">
                            <strong>Materialien:</strong><br>
                            Stahl (+10%), Gold (+20%), Diamant (+40%), Magie (+30%), Plasma (+50%)
                        </div>
                        <div class="tip">
                            <strong>Effekte:</strong><br>
                            Feuer, Eis, Blitz, Gift, Heilung, Explosiv
                        </div>
                    </div>
                    
                    <h3>Steuerung:</h3>
                    <div class="controls-help">
                        <p>W/A/S/D = Bewegen | Leertaste = Springen | F = Angriff | ESC = Zur√ºck</p>
                    </div>
                    
                    <h3>üéØ Beispiele f√ºr starke Waffen:</h3>
                    <ul>
                        <li>"Diamant-Laserkanone mit Blitzeffekt"</li>
                        <li>"Magische Plasmaaxt der Explosion"</li>
                        <li>"Giftiger Kristallspeer mit Eisschaden"</li>
                    </ul>
                </div>
                <button class="btn btn--primary" id="close-help">
                    <span>‚úÖ</span> Verstanden
                </button>
            </div>
        </div>

        <!-- Connection Error Modal -->
        <div id="error-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Verbindungsfehler</h2>
                <div class="error-content">
                    <p id="error-message">Es gab ein Problem mit der Verbindung.</p>
                    <div class="error-actions">
                        <button class="btn btn--primary" id="retry-connection">
                            <span>üîÑ</span> Erneut versuchen
                        </button>
                        <button class="btn btn--secondary" id="close-error">
                            <span>‚ùå</span> Schlie√üen
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Particle System -->
        <div id="particles"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
