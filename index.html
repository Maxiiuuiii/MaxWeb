<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bilder-Zaubermaschine üé®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .emoji {
            font-size: 3rem;
        }

        .input-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: bold;
        }

        textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            font-size: 1.1rem;
            border: 3px solid #667eea;
            border-radius: 15px;
            resize: vertical;
            font-family: 'Arial', sans-serif;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .btn {
            display: block;
            width: 100%;
            padding: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-generate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            margin: 20px 0;
            display: none;
        }

        .loading-text {
            font-size: 1.3rem;
            color: #667eea;
            font-weight: bold;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .image-container {
            text-align: center;
            margin: 30px 0;
            display: none;
        }

        .generated-image {
            max-width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        .action-buttons {
            display: none;
            gap: 15px;
        }

        .btn-print {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
            color: white;
        }

        .btn-reset {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
        }

        .error-message {
            display: none;
            background: #ffe0e0;
            border: 3px solid #ff6b6b;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .error-message p {
            color: #d63031;
            font-size: 1.2rem;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            .container {
                padding: 25px;
            }

            .btn {
                font-size: 1.1rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><span class="emoji">üé®</span> Bilder-Zaubermaschine <span class="emoji">‚ú®</span></h1>
        
        <div class="input-section">
            <label for="prompt">Was m√∂chtest du sehen? üñºÔ∏è</label>
            <textarea 
                id="prompt" 
                placeholder="Zum Beispiel: Ein blauer Drache mit Sonnenbrille auf dem Pausenhof"
            ></textarea>
        </div>

        <button class="btn btn-generate" id="generateBtn">
            ü™Ñ Bild erstellen
        </button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p class="loading-text">‚ú® Bild wird gezaubert... ‚ú®</p>
        </div>

        <div class="error-message" id="error">
            <p>üòï Ups, der KI-Zauberstab ist gerade m√ºde. Versuch es noch einmal!</p>
        </div>

        <div class="image-container" id="imageContainer">
            <img id="generatedImage" class="generated-image" alt="Generiertes Bild">
        </div>

        <div class="action-buttons" id="actionButtons">
            <button class="btn btn-print" id="printBtn">
                üñ®Ô∏è Drucken
            </button>
            <button class="btn btn-reset" id="resetBtn">
                üîÑ Neues Bild
            </button>
        </div>
    </div>

    <script>
        // ========================================
        // HIER DEINE DATEN EINTRAGEN! üëá
        // ========================================
        
        // Trage hier deinen Hugging Face API-Key ein
        // Den bekommst du auf: https://huggingface.co/settings/tokens
        const HF_API_KEY = "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";
        
        // Trage hier das Modell ein, das du verwenden m√∂chtest
        // Beispiele:
        // - "black-forest-labs/FLUX.1-schnell" (schnell, gute Qualit√§t)
        // - "stabilityai/stable-diffusion-xl-base-1.0"
        // - "runwayml/stable-diffusion-v1-5"
        const MODEL_ID = "black-forest-labs/FLUX.1-schnell";
        
        // ========================================
        // AB HIER NICHTS MEHR √ÑNDERN üòä
        // ========================================

        // DOM-Elemente
        const promptInput = document.getElementById('prompt');
        const generateBtn = document.getElementById('generateBtn');
        const loading = document.getElementById('loading');
        const errorDiv = document.getElementById('error');
        const imageContainer = document.getElementById('imageContainer');
        const generatedImage = document.getElementById('generatedImage');
        const actionButtons = document.getElementById('actionButtons');
        const printBtn = document.getElementById('printBtn');
        const resetBtn = document.getElementById('resetBtn');

        // Event Listener f√ºr "Bild erstellen"
        generateBtn.addEventListener('click', generateImage);

        // Event Listener f√ºr "Drucken"
        printBtn.addEventListener('click', printImage);

        // Event Listener f√ºr "Neues Bild"
        resetBtn.addEventListener('click', resetApp);

        // Enter-Taste im Textarea soll auch Bild generieren (optional)
        promptInput.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                generateImage();
            }
        });

        async function generateImage() {
            const prompt = promptInput.value.trim();

            // Pr√ºfen ob Prompt leer ist
            if (!prompt) {
                alert('ü§î Bitte schreibe zuerst, was du sehen m√∂chtest!');
                return;
            }

            generateBtn.disabled = true;
            loading.style.display = 'block';
            errorDiv.style.display = 'none';
            imageContainer.style.display = 'none';
            actionButtons.style.display = 'none';

            try {
                // API-Anfrage an Hugging Face
                const response = await fetch(`https://api-inference.huggingface.co/models/${MODEL_ID}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${HF_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        inputs: prompt
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Fehler: ${response.status}`);
                }

                // Bild als Blob empfangen
                const blob = await response.blob();

                // Blob in URL umwandeln und anzeigen
                const imageUrl = URL.createObjectURL(blob);
                generatedImage.src = imageUrl;

                // Bild anzeigen
                imageContainer.style.display = 'block';
                actionButtons.style.display = 'grid';
                actionButtons.style.gridTemplateColumns = '1fr 1fr';

            } catch (error) {
                console.error('Fehler beim Generieren:', error);
                errorDiv.style.display = 'block';
            } finally {
                // Loading verstecken und Button wieder aktivieren
                loading.style.display = 'none';
                generateBtn.disabled = false;
            }
        }

        function printImage() {
            // Neues Fenster √∂ffnen, nur mit dem Bild
            const printWindow = window.open('', '_blank');
            
            printWindow.document.write(
                '<!DOCTYPE html>' +
                '<html>' +
                '<head>' +
                    '<title>Bild drucken</title>' +
                    '<style>' +
                        'body {' +
                            'margin: 0;' +
                            'display: flex;' +
                            'justify-content: center;' +
                            'align-items: center;' +
                            'min-height: 100vh;' +
                        '}' +
                        'img {' +
                            'max-width: 100%;' +
                            'height: auto;' +
                        '}' +
                    '</style>' +
                '</head>' +
                '<body>' +
                    '<img src="' + generatedImage.src + '" alt="Generiertes Bild">' +
                    '<script>' +
                        'window.onload = function() {' +
                            'window.print();' +
                        '};' +
                    '<\/script>' +
                '</body>' +
                '</html>'
            );
            
            printWindow.document.close();
        }

        function resetApp() {
            // Eingabefeld leeren
            promptInput.value = '';
            
            // Bild und Buttons verstecken
            imageContainer.style.display = 'none';
            actionButtons.style.display = 'none';
            errorDiv.style.display = 'none';
            
            // Alte Bild-URL freigeben (Speicher sparen)
            if (generatedImage.src) {
                URL.revokeObjectURL(generatedImage.src);
                generatedImage.src = '';
            }
            
            // Focus zur√ºck auf Eingabefeld
            promptInput.focus();
        }
    </script>
</body>
</html>
